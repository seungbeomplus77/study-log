## π’΅ Lessons Learned
## π“… μ‘μ„±μΌ: 2024-11-21

# **νμΌμ²λ¦¬**

1. νμΌ μ²λ¦¬ μ‹ ν•„μ μ‚¬ν•­
- `enctype: νμΌμ„ μ„λ²„λ΅ μ „μ†΅ν•  λ• λ°λ“μ‹ enctype="multipart/form-data"`λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄ μ†μ„±μ„ μ‚¬μ©ν•μ§€ μ•μΌλ©΄, νμΌμ€ URL μΏΌλ¦¬ μ¤νΈλ§μΌλ΅ λ³΄λ‚΄μ§€κΈ° λ•λ¬Έμ— μ λ€λ΅ μ²λ¦¬λμ§€ μ•μµλ‹λ‹¤.
- `boundary: multipart/form-data` λ°©μ‹μ—μ„λ” νμΌ ν•­λ©μ„ κµ¬λ¶„ν•λ” κµ¬λ¶„μ(boundary)κ°€ ν•„μ”ν•©λ‹λ‹¤. μ„λ²„λ” μ΄ `boundary`λ¥Ό ν†µν•΄ κ° νμΌμ„ λ¶„λ¦¬ν•μ—¬ μ²λ¦¬ν•©λ‹λ‹¤.
---
2. HTTP λ©”μ„λ“
- GET: λ°μ΄ν„°λ¥Ό URL μΏΌλ¦¬ μ¤νΈλ§μ— ν¬ν•¨ν•μ—¬ μ „μ†΅ν•©λ‹λ‹¤. μΌλ°μ μΌλ΅ `getParameter()`λ΅ κ°’μ„ λ°›μΌλ©°, νμΌμ€ μ²λ¦¬ν•  μ μ—†μµλ‹λ‹¤.
- POST: λ°μ΄ν„°λ¥Ό HTTP μ”μ²­ λ°”λ””μ— ν¬ν•¨ν•μ—¬ μ „μ†΅ν•©λ‹λ‹¤. `getParameter()`λ΅λ„ κ°’μ„ λ°›μ„ μ μμ§€λ§, νμΌμ€ `inputStream`μ„ μ‚¬μ©ν•μ—¬ μ²λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤.
---
3. μ„λΈ”λ¦Ώμ„ μ‚¬μ©ν• νμΌ μ²λ¦¬
- μ„λΈ”λ¦Ώ 3.0 μ΄μƒμ—μ„λ” `@MultipartConfig` μ• λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•μ—¬ νμΌ μ—…λ΅λ“λ¥Ό μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
- νμΌμ€ `req.getParts()`λ΅ λ°›μ•„μ¤λ©°, κ°κ°μ νμΌ ν•­λ©μ€ Part κ°μ²΄λ΅ μ²λ¦¬λ©λ‹λ‹¤.
- `getParts()` λ©”μ„λ“λ” μ”μ²­μ— ν¬ν•¨λ λ¨λ“  ννΈλ“¤μ„ λ°ν™ν•©λ‹λ‹¤. μ—¬λ¬ νμΌμ΄ μ „μ†΅λ κ²½μ°, κ° νμΌμ€ λ³„λ„μ Part κ°μ²΄λ΅ κ΄€λ¦¬λ©λ‹λ‹¤.
- μΌλ°μ μΈ νΌ νλΌλ―Έν„°λ” `req.getParameter("parameterName")`λ΅ λ°›μ„ μ μμ§€λ§, νμΌμ€ `req.getParts`()λ΅ λ°›μ•„ μ²λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤.
---
4. νμΌ λ° ν΄λ” κ΄€λ¦¬
- `file.exists():` μ§€μ •ν• νμΌμ΄ μ΅΄μ¬ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤. νμΌμ΄ μ—†μΌλ©΄ false, μμΌλ©΄ trueλ¥Ό λ°ν™ν•©λ‹λ‹¤.
- `file.mkdirs():` ν΄λ”λ¥Ό μƒμ„±ν•©λ‹λ‹¤. κ²½λ΅μ— ν¬ν•¨λ λ¨λ“  ν΄λ”κ°€ μ΅΄μ¬ν•μ§€ μ•μΌλ©΄, ν•΄λ‹Ή ν΄λ”λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
---
5. νμΌ μ €μ¥ μ„μΉ
- ν΄λΌμ΄μ–ΈνΈκ°€ νμΌμ„ μ›Ή λΈλΌμ°μ €μ—μ„ μ ‘κ·Όν•λ ¤λ©΄, WEBAPP λ””λ ‰ν† λ¦¬ λ‚΄μ— νμΌμ„ μ €μ¥ν•΄μ•Ό ν•©λ‹λ‹¤.
- META-INF, WEB-INF λ””λ ‰ν† λ¦¬ λ‚΄μ—λ” νμΌμ„ μ €μ¥ν•  μ μ—†μΌλ©°, μ΄ κ²½λ΅λ” μ›Ήμ—μ„ μ ‘κ·Όν•  μ μ—†μµλ‹λ‹¤.
- λν•, μ„λΈ”λ¦Ώ μ΄λ¦„κ³Ό νμΌ μ΄λ¦„μ΄ λ™μΌν•λ©΄ μ¶©λμ΄ λ°μƒν•  μ μμΌλ―€λ΅ ν”Όν•΄μ•Ό ν•©λ‹λ‹¤.
---
6. νμΌ μ—…λ΅λ“ κ΄€λ ¨ HTML
- multiple μ†μ„±: `<input type="file" multiple />`λ¥Ό μ‚¬μ©ν•λ©΄ νμΌμ„ μ—¬λ¬ κ° μ„ νƒν•μ—¬ μ—…λ΅λ“ν•  μ μμµλ‹λ‹¤.
- Content-Type: νμΌ μ „μ†΅ μ‹μ—λ” Content-Typeμ„ application/octet-streamμΌλ΅ μ„¤μ •ν•μ—¬ μ„λ²„κ°€ νμΌλ΅ μΈμ‹ν•  μ μκ² ν•©λ‹λ‹¤.(μ„λΈ”λ¦Ώ μƒμΌλ΅λ„ μ„¤μ • ν• μμμ)

